<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="dashboard.css"/>
  </head>
  <body>
    <nav>
      <div id="home">
        <div class="logo">
            <img src="https://justact-api-uploads.s3.ap-south-1.amazonaws.com/8/1663740392888-c61d5dcd-8957-4cc9-b836-295b26543747/IMG_20220921_103730.jpg" alt="justact logo" class="imagelogo"> 
        </div>
        <div class="header">
          <h1>DASHBOARD</h1>
        </div>
        
        <div class="topdiv">
          <a class="topmenu" href="dashboard.html">Home</a>
        </div>
      </div>    
    </nav>
    <nav>
      <div id="home2">
        <div class="elements">
          <div class="dropdown">
            <button onclick="toggleDropdown('lotDropdown')" class="dropbtn"><h1>Lot Date</h1></button>
            <div id="lotDropdown" class="dropdown-content">
              <ul class = "menu" id="lotDropdownMenu">

                <script>
                        // const moment = require('moment');
                        fetch('http://localhost:3000/api/lot-dates')
                        .then(response => response.json())
                        .then(dates => {
                          dates.sort((a, b) => {
                            const dateA = new Date(a);
                            const dateB = new Date(b);
                            return dateB - dateA;
                          });
                          const lotDropdownMenu = document.getElementById('lotDropdownMenu');
                          dates.forEach(date => {
                            const option = document.createElement('li');
                            const anchor = document.createElement('a');
                            anchor.href = `lot-details.html?lotNumber=${date}`;
                            anchor.textContent = `Lot Date ${date}`;
                            option.appendChild(anchor);
                            lotDropdownMenu.appendChild(option);
                          });
                        })
                        .catch(error => console.error('Error fetching lot dates:', error));
                        // fetch('http://localhost:3000/api/lot-dates')
                        // .then(response => response.json())
                        // .then(dates => {
                        //   const lotDropdownMenu = document.getElementById('lotDropdownMenu');
                        //   dates.forEach(date => {
                        //     const option = document.createElement('li');
                        //     const anchor = document.createElement('a');
                        //     anchor.href = `lot-details.html?lotNumber=${date}`;
                        //     // anchor.textContent = `Lot Date ${moment(date).format('YYYY-MM-DD')}`;
                        //     anchor.textContent = `Lot Date ${(date)}`;
                        //     option.appendChild(anchor);
                        //     lotDropdownMenu.appendChild(option);
                        //   });
                        // })
                        // .catch(error => console.error('Error fetching lot dates:', error));

                </script>
                
                <!-- <li><a href="#"></a></li>
                <li><a href="#"></a</li>>
                <li><a href="#"></a></li>
                <li><a href="#"></a></li> -->
              </ul>
            </div>
          </div>
        </div>
        <div class="elements">
          <div class="dropdown">
            <button onclick="toggleDropdown('secDropdown')" class="dropbtn"><h1>Section 17</h1></button>
            <div id="secDropdown" class="dropdown-content">
              <ul class = "menu">
              <li><a href="#"></a></li>
              <li><a href="#"></a></li>
              <li><a href="#"></a></li>
              <li<a href="#"></a>></li>
            </ul>
            </div>
          </div>
        </div>
        <div class="elements">
            <div class="dropdown">
              <button onclick="toggleDropdown('awardDropdown')" class="dropbtn"><h1>Final Award</h1></button>
              <div id="awardDropdown" class="dropdown-content">
                <ul class = "menu">
                  <li><a href="#"></a></li>
                  <li><a href="#"></a></li>
                  <li><a href="#"></a></li>
                  <li<a href="#"></a>></li>
                </ul>
                
              </div>
            </div>
          </div>
          <div class="elements">
            <div class="dropdown">
              <button onclick="toggleDropdown('holdDropdown')" class="dropbtn"><h1>Hold Cases</h1></button>
              <div id="holdDropdown" class="dropdown-content">
                <ul class = "menu">
                  <li><a href="#"></a></li>
                  <li><a href="#"></a></li>
                  <li><a href="#"></a></li>
                  <li<a href="#"></a>></li>
                </ul>
                
              </div>
            </div>
          </div>
        <div class="elements">
          <div class="dropdown">
            <button onclick="toggleDropdown('settleDropdown')" class="dropbtn"><h1>Settled Cases</h1></button>
            <div id="settleDropdown" class="dropdown-content">
              <ul class = menu>
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
                <li><a href="#"></a></li>
                <li<a href="#"></a>></li>
              </ul>
            </div>
          </div>
        </div>
        <div class="elements">
          <div class="dropdown">
            <button onclick="generateExcel()" class = "dropbtn"><h1>Generate MIS</h1></button>
          </div>
        </div>
      </div>
          
    </nav>
    <script>
      function toggleDropdown(dropdownId) {
        var dropdownContent = document.getElementById(dropdownId);
        dropdownContent.classList.toggle("show");
      }
      function generateExcel() {
        fetch('http://localhost:3000/generate-excel')
          .then(response => response.blob())
          .then(blob => {
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'case_data.xls';
            a.click();
            URL.revokeObjectURL(url);
          });
      }
    </script>



    </script>
  </body>
</html>








<!-- Your HTML file remains the same, except for the script tag -->
